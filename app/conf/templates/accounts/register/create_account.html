{% load staticfiles %}
{% load formtags %}

<!DOCTYPE html>
<html>
	<head>
		<title>Payments</title>
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Anaheim' rel='stylesheet'>
        <!-- ICONS -->
        <link rel="apple-touch-icon" sizes="76x76" href="{% static 'assets/img/apple-icon.png' %}">
        <link rel="icon" type="image/png" sizes="96x96" href="{% static 'assets/img/favicon.png' %}">
        <!-- VENDOR CSS -->
        <link rel="stylesheet" href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}">
        <link rel="stylesheet" href="{% static 'assets/vendor/font-awesome/css/font-awesome.min.css' %}">
        <link rel="stylesheet" href="{% static 'assets/vendor/linearicons/style.css' %}">
        <!-- MAIN CSS -->
        <link rel="stylesheet" href="{% static 'assets/css/main.css' %}">
        <!-- CUSTOM CSS -->
        <link rel="stylesheet" href="{% static 'css/custom_styles.css' %}">
        {% block extra_extyles %}
        	<style type="text/css">
				button {
				    font-family: inherit;
				    font-size: inherit;
				    line-height: inherit;
				    background: transparent;
				    border: transparent;
				}
        		body{
        			font-size: 15px;
        		}
        		h1{
        			font-size: 50px;
        			color: white;
        		}
        		p{
        			color: white;
        			font-size: 20px;
        		}
        		.input-group{
        			margin-bottom:5px;
        		}
				.alert {
				    padding: 15px;
				    margin-bottom: 0px;
				    border: 1px solid transparent;
				    border-radius: 4px;
				}
				.alert-dismissible .close {
				    position: relative;
				    top: -2px;
				    right: -5px;
				    color: inherit;
				}
        	</style>
        {% endblock %}
	</head>
	<body background="{% static 'img/light.jpg' %}">

		<div class='row'>
			<div class='col-md-8 col-md-offset-2' style='margin-top:40px;'>

				{% if messages %}
					{% for message in messages %}
						<div {% if message.tags %} class="alert alert-{{ message.tags }} alert-dismissible"{% endif %} role="alert">
							<button type="button" class="close" data-dismiss="alert" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
							<strong>{{ message.tags }}:</strong> {{ message }}
							{% if message.tags == 'info' %}
								<button onclick='open_window_payment()'>aqui</button>.
							{% endif %}
						</div>
					{% endfor %}
				{% endif %}

				{% if form.errors %}
					<div class="alert alert-danger">
						<button aria-hidden="true" data-dismiss="alert" class="close" type="button">Ã—</button>
						<strong>Error: </strong>
						{% for field, error in form.errors.items %}
							{% if field != '__all__' %}{{ field }}{% endif %}
								{{ error | striptags }}<br />
							{% endfor %}
					</div>
				{% endif %}
			</div>
		</div>

		<div class='row'>

			<div class='col-md-4 col-md-offset-1' style='margin-top:10%;'>
				<h1>Wallet</h1>
				<p>sua carteira virtual, disponivel 24 horas</p>
				<p>realize o seu cadastro.</p>
			</div>

			<div class='col-md-4'>

				<form id='id_form_account' name='form_account' method='POST'>
					{% csrf_token %}
					<div class='row'>

						<div class='col-md-8 col-md-offset-2'>
							<div class="text-center">
								<h1>Cadastrar</h1>
							</div>
							<div class='input-group {% if form_account.cpf.errors %}has-error{% endif %}'>
								<div class='input-group-addon'>
									<i class='fa fa-user fa-fw'></i>
								</div>
								{{ form_account.cpf|placeholder:"Cpf" |addcss:"form-control" }}
							</div>

							<div class='input-group {% if form_profile.first_name.errors %}has-error{% endif %}'>
								<div class='input-group-addon'>
									<i class='fa fa-id-card fa-fw'></i>
								</div>
								{{ form_profile.first_name|placeholder:"Nome" |addcss:"form-control" }}
							</div>

							<div class='input-group {% if form_profile.last_name.errors %}has-error{% endif %}'>
								<div class='input-group-addon'>
									<i class='fa fa-id-card fa-fw'></i>
								</div>
								{{ form_profile.last_name|placeholder:"Sobrenome" |addcss:"form-control" }}
							</div>

							<div class='input-group {% if form_user.email.errors %}has-error{% endif %}'>
								<div class='input-group-addon'>
									<i class='fa fa-envelope fa-fw'></i>
								</div>
								{{ form_user.email|addcss:"form-control" }}
							</div>

							<div class='input-group {% if form_profile.birthday.errors %}has-error{% endif %}'>
								<div class='input-group-addon'>
									<i class='fa fa-birthday-cake fa-fw'></i>
								</div>
								{{ form_profile.birthday|addcss:"form-control" }}
							</div>

							<div class='input-group {% if form_profile.state.errors %}has-error{% endif %}'>
								<div class='input-group-addon'>
									<i class='fa fa-map-marker fa-fw'></i>
								</div>
								{{ form_profile.state|addcss:"form-control" }}
							</div>

							<div class='input-group {% if form_profile.url.errors %}has-error{% endif %}'>
								<div class='input-group-addon'>
									<i class='fa fa-bookmark fa-fw'></i>
								</div>
								{{ form_profile.url|placeholder:"Site / Rede Social" |addcss:"form-control" }}
							</div>

							<div class='input-group {% if form_user.password1.errors %}has-error{% endif %}'>
								<div class='input-group-addon'>
									<i class='fa fa-key fa-fw'></i>
								</div>
								{{ form_user.password1|placeholder:"password" |addcss:"form-control" }}
							</div>

							<div class='input-group {% if form_user.password2.errors %}has-error{% endif %}'>
								<div class='input-group-addon'>
									<i class='fa fa-lock fa-fw'></i>
								</div>
								{{ form_user.password2|placeholder:"Repeat password" |addcss:"form-control" }}
							</div>

							<div class="text-center" style='margin-top:20px;'>
								<button class='btn btn-danger' type='submit' name='create_account' id='id_create_account'>
									Criar Conta
								</button>
								<a class='btn btn-primary' href="{% url 'accounts:login' %}" name='login' id='id_login'>
									Fazer Login
								</a>
							</div>

						</div><!-- col-md-4 -->

					</div><!-- row -->

				</form>
			</div>

		</div><!-- END ROW -->

		<script src="{% static 'assets/vendor/jquery/jquery.min.js' %}"></script>
		<script src="{% static 'assets/vendor/bootstrap/js/bootstrap.min.js' %}"></script>
		<script src="{% static 'js/libs/moment.min.js' %}"></script>
		<script src="{% static 'js/libs/daterangepicker.js' %}"></script>

		<script type="text/javascript">

		//SUCCESS CREATE ACCOUNT REDIRECT PGSEGURO
		function open_window_payment(){
		window.open('/main/payment/', '_blank');
		}

		//GET CONFIG DATAPICKER
		function get_config_datapicker(list_dict){
		context = {
		"ranges": {
		'Today': [moment(), moment()],
		'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
		'Last 7 Days': [moment().subtract(6, 'days'), moment()],
		'Last 30 Days': [moment().subtract(29, 'days'), moment()],
		'This Month': [moment().startOf('month'), moment().endOf('month')],
		'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
		},
		"linkedCalendars": false,
		"opens": "right",
		}

		$.each(list_dict, function(key, value) {
		$.extend(context, value);
		});
		return context;
		}

		//GET LOCALE
		function get_locale(format_date){
		locale = {
		"locale": {
		"separator": " - ",
		"applyLabel": "Apply",
		"cancelLabel": "Cancel",
		"fromLabel": "From",
		"toLabel": "To",
		"customRangeLabel": "Custom",
		"weekLabel": "W",
		"daysOfWeek": ["Su","Mo","Tu","We","Th","Fr","Sa"],
		"monthNames": ["January","February","March","April","May","June","July",
		"August","September","October","November","December"],
		"firstDay": 1
		},
		}
		if(format_date){
		$.extend(locale["locale"], format_date);
		}
		return locale;
		}

		$(function(){
		//DISABLE BUTTON SUBMIT FORM
		$("#id_form_account").submit(function(e){
		$('#id_create_account').attr("disabled", true);
		});

		//AUTOMATIC OPEN WINDOW PAYMENT
		if($('.alert-info').length){
		setTimeout(function(){
		open_window_payment();
		}, 7000);
		}

		//CHECK EXIST NOTE
		if($('#id_birthday')){
		list_dict = [];
		list_dict.push({"singleDatePicker": true,"timePicker": false});
		list_dict.push(get_locale({"format": "DD/MM/YYYY"}));
		$('input[name="birthday"]').daterangepicker(get_config_datapicker(list_dict));
		}

		});

		</script>

	</body>
</html>